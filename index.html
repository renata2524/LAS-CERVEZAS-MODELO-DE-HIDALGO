<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Registro de Mantenimiento de unidades</title>
<link href="https://fonts.googleapis.com/css2?family=Century+Gothic&display=swap" rel="stylesheet" />
<style>
  /* Reset básico */
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0; height: 100%;
    background: linear-gradient(145deg, #0c1a2b, #1c2c3c);
    font-family: 'Century Gothic', 'Segoe UI', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .ventana {
    background: white;
    border-radius: 14px;
    box-shadow: 0 0 25px rgba(0,0,0,0.3);
    width: 350px;
    padding: 25px 30px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .ventana img {
    width: 80px;
    height: 80px;
    margin-bottom: 20px;
    object-fit: contain;
  }

  .ventana h2 {
    margin: 0 0 20px;
    font-size: 1.4rem;
    font-weight: bold;
    color: #1a1a1a;
    text-align: center;
    width: 100%;
  }

  form {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  label {
    font-size: 0.85rem;
    color: #333;
  }

  input[type="text"],
  input[type="tel"],
  input[readonly],
  textarea {
    width: 100%;
    padding: 8px 10px;
    border-radius: 6px;
    border: 1px solid #aaa;
    font-size: 0.9rem;
    color: #1a1a1a;
    font-family: 'Century Gothic', sans-serif;
  }

  textarea {
    resize: vertical;
    min-height: 60px;
  }

  button {
    margin-top: 10px;
    padding: 10px 0;
    border: none;
    border-radius: 8px;
    background-color: #374151;
    color: white;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  button:hover {
    background-color: #1f2937;
  }

  .mensaje {
    margin-top: 12px;
    font-size: 0.9rem;
    text-align: center;
    padding: 8px;
    border-radius: 8px;
    display: none;
  }

  .mensaje.exito {
    background-color: #1e3a8a;
    color: #dbeafe;
    border: 1px solid #3b82f6;
  }

  .mensaje.error {
    background-color: #7f1d1d;
    color: #fee2e2;
    border: 1px solid #f87171;
  }
</style>
</head>
<body>

<div class="ventana">
  <img src="images.png" alt="Icono" />
  <h2>Registro de Mantenimiento de Unidades</h2>
  <form id="formulario" novalidate>
    <label for="fecha">Fecha</label>
    <input type="text" id="fecha" name="fecha" readonly />

    <label for="nombre">Nombre</label>
    <input type="text" id="nombre" name="nombre" placeholder="" required />

    <label for="numtrabajador">Número de trabajador</label>
    <input type="text" id="numtrabajador" name="numtrabajador" placeholder="" required />

    <label for="ruta">Ruta</label>
    <input type="text" id="ruta" name="ruta" placeholder="Ruta asignada" required />

    <label for="detalles">Detalles </label>
    <textarea id="detalles" name="detalles" placeholder=""></textarea>

    <label for="telefono">Teléfono</label>
    <input type="tel" id="telefono" name="telefono" placeholder="" required />

    <button type="submit">Generar PDF</button>
    <div id="mensajeRespuesta" class="mensaje"></div>
  </form>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  const { jsPDF } = window.jspdf;
  const form = document.getElementById('formulario');
  const mensaje = document.getElementById('mensajeRespuesta');
  const fechaInput = document.getElementById('fecha');

  const hoy = new Date();
  const fechaFormateada = hoy.toLocaleDateString('es-MX', {
    day: '2-digit',
    month: '2-digit',
    year: 'numeric'
  });
  fechaInput.value = fechaFormateada;

  form.addEventListener('submit', function(e) {
    e.preventDefault();
    mensaje.style.display = 'none';

    const fecha = fechaInput.value;
    const nombre = form.nombre.value.trim();
    const num = form.numtrabajador.value.trim();
    const ruta = form.ruta.value.trim();
    const detalles = form.detalles.value.trim();
    const tel = form.telefono.value.trim();

    if (!nombre || !num || !ruta || !tel) {
      mostrarMensaje('Por favor, complete todos los campos obligatorios.', 'error');
      return;
    }

    if (!/^\d{7,}$/.test(tel)) {
      mostrarMensaje('El número telefónico debe conten al menos 7 dígitos.', 'error');
      return;
    }

    const doc = new jsPDF();
    const ancho = 190;
    let y = 20;

   
    doc.setFillColor(25, 42, 65);
    doc.rect(0, 0, 210, 30, 'F');
    doc.setTextColor(255, 255, 255);
    doc.setFont('times', 'bold');
    doc.setFontSize(16);
    doc.text('REGISTRO DE MANTENIMIENTO DE UNIDADES', 105, 18, { align: 'center' });

    y = 40;
    doc.setTextColor(33, 33, 33);
    doc.setFont('times', 'normal');
    doc.setFontSize(12);

    const campos = [
      { label: "Fecha", value: fecha },
      { label: "Nombre completo", value: nombre },
      { label: "Números de trabajador", value: num },
      { label: "Ruta asignada", value: ruta },
      { label: "Teléfono", value: tel }
    ];

    campos.forEach(({ label, value }) => {
      doc.setFillColor(245, 245, 245);
      doc.rect(15, y, ancho, 10, 'F');
      doc.setTextColor(0, 0, 0);
      doc.text(`${label}: ${value}`, 20, y + 7);
      y += 12;
    });

    doc.setFillColor(245, 245, 245);
    doc.rect(15, y, ancho, 10, 'F');
    doc.text("Detalles:", 20, y + 7);
    y += 12;

    const detallesLineas = doc.splitTextToSize(detalles || 'N/A', 180);
    detallesLineas.forEach(linea => {
      doc.text(linea, 20, y);
      y += 8;
    });

   
    y += 20;
    doc.setLineWidth(0.5);
    doc.line(130, y + 15, 190, y + 15);
    doc.text('Firma del responsable', 130, y + 22);

    doc.save(`reporte_${nombre.replace(/\s+/g, '_')}.pdf`);
    mostrarMensaje('PDF generado exitosamente.', 'exito');
    form.reset();
    fechaInput.value = fechaFormateada;
  });

  function mostrarMensaje(texto, tipo) {
    mensaje.textContent = texto;
    mensaje.className = 'mensaje ' + tipo;
    mensaje.style.display = 'block';
  }
</script>

</body>
</html>










